================================================================================
Fizzlebee's Treasure Tracker - Patch Notes
================================================================================

Version 1.1.1 (2025-10-22) - Zone Filtering Bug Fix
--------------------------------------------------------------------------------

BUG FIXES:
- Fixed: Treasures now respect zone filtering (hidden when player in different zone)
- Fixed: Treasures now store and update zoneID on loot (matching mob behaviour)

TECHNICAL:
- Added zoneID tracking to RecordLoot() for treasure entries
- Treasures now update zoneID on each loot event (handles player movement)

PREVIOUS RELEASES:
--------------------------------------------------------------------------------

Version 1.1.0 (2025-10-22) - Treasure Tracking Feature
--------------------------------------------------------------------------------

Major new feature: Treasure chest tracking with zone-based grouping!

NEW FEATURES:
- Treasure chest detection (GameObject vs Creature differentiation)
- Zone-based treasure grouping (all chests per zone in one entry)
- Treasure-specific metrics (lootCount instead of kills)
- Gold tracking per mob/treasure with header display
- Session/total treasure loot count (e.g., "Treasure Lorenhall 1/21")
- Separate active state tracking for treasures (5-minute window)
- Pending items queue for cache-delayed item resolution

IMPROVEMENTS:
- Gold parsing from loot slots (TWW-compatible, no GetLootSlotMoney)
- ItemID-based database keys for consistent tracking
- Improved treasure detection heuristic (GUID + timestamp-based)
- Fallback mechanisms for uncached items
- Compact header format ("Treasure Lorenhall [13g 75s] 1/21")
- Localisation: "Schatz" (DE), "Treasure" (EN), 10 languages updated

UI ENHANCEMENTS:
- Gold displayed in mob/treasure headers with coin icons
- Session/total format for treasures matches mob display
- Items with failed quality checks now show (fallback for uncached)
- Cleaner header layout without colons

TECHNICAL:
- Database migration v2: isTreasure flag for all entries
- Database migration v3: lastSeen and lootCount fields for treasures
- Database migration v4: ItemID-based loot keys migration
- sessionTreasureLootCount tracking (separate from mob kills)
- ProcessPendingItems() background resolver (1-second interval)
- OnUpdate handler for pending item resolution
- Treasure names stored in English, localised for display

BUG FIXES:
- Fixed: Treasures appearing as inactive immediately after looting
- Fixed: Session timer not starting on first treasure loot
- Fixed: Gold parsing for The War Within (string-based extraction)
- Fixed: Items not appearing due to nil itemQuality checks
- Fixed: Division by zero in treasure loot sorting
- Fixed: Backwards compatibility treasure name checks simplified
- Fixed: Heartbeat errors with hideButton field naming

LOCALISATIONS:
All 10 languages updated with shorter treasure names:
- German: "Schatzfund" → "Schatz"
- English: "Treasure Find" → "Treasure"
- Spanish, French, Italian, Portuguese, Russian, Korean, Chinese

PREVIOUS RELEASES:
--------------------------------------------------------------------------------

Version 1.0.2 (2025-10-22)
--------------------------------------------------------------------------------

Documentation and release infrastructure improvements.

IMPROVEMENTS:
- Migrated CLAUDE.md to BBC English (formal documentation standard)
- Created modular documentation structure:
  - CLAUDE_ARCHITECTURE.md (file structure, modules, design patterns)
  - CLAUDE_API.md (complete public API reference)
  - CLAUDE_DEVELOPMENT.md (dev workflow, testing, debugging)
  - CLAUDE_DE.md (full German documentation backup)
- Added example installation path to README.md for clarity
- Fixed GitHub Actions workflow excluding release/ temporary folder from ZIP
- Improved PATCHNOTES.txt format and structure

TECHNICAL:
- Release ZIP now correctly excludes: .claude/, .git/, .github/, .gitignore, release/, API_DOCUMENTATION.md
- No more empty nested release/ folder in distributed ZIP files
- Documentation follows BBC English Golden Rule (#5)
- Smaller, focused documentation files (better maintainability)

PREVIOUS RELEASES:
--------------------------------------------------------------------------------

Version 1.0.1 (2025-10-22) - Build system test
- Tested automated GitHub Actions release workflow
- Verified SemVer versioning system

Version 1.0.0 (2025-10-22) - Initial stable release
--------------------------------------------------------------------------------

Initial stable release with Semantic Versioning.

NEW FEATURES:
- Mob kill tracking (session & total)
- Loot tracking with drop rates (1:X ratio format)
- Gold tracking (session & total)
- DPS calculation (real-time damage per second)
- Quality statistics (Green, Blue, Purple, Orange items)
- Performance metrics (kills/s, kills/h)
- Item highlighting across all mobs
- Zone filtering (show only current zone)
- Auto-collapse for inactive mobs (>5 minutes)
- Multi-language support (10 languages)

UI FEATURES:
- Transparent mode with adjustable opacity
- Font scaling (Small, Medium, Large)
- Auto-sizing or manual window resize
- Position locking
- Quality filtering (All, Green+, Blue+, Purple+)
- Debug mode

TECHNICAL:
- Unix timestamps (time() instead of GetTime()) for stability
- Entry pool system for performance
- Public API for other addons
- SavedVariables persistence
- Heartbeat monitoring system

PREVIOUS RELEASES:
--------------------------------------------------------------------------------

Version 1.0.251022.0842 (2025-10-22) - HOTFIX
- CRITICAL: Fixed GetTime() reset issue after WoW Patch 11.0.5
- Migrated all timestamps from GetTime() to time() (Unix timestamps)
- Added automatic migration for old data
- Improved debug output system (behind settings checkbox)
- All debug prints now hidden by default

Version 1.0 (2025-01-20) - Initial Release
- First public release
- All core features implemented

================================================================================

SUPPORT:
- Bug Reports: https://github.com/Fizzlebees-Rocket-Shop/FizzlebeesTreasureTracker/issues
- Documentation: See CLAUDE.md (.claude folder)
- API Documentation: See API_DOCUMENTATION.md

AUTHOR:
Fizzlebee (Vivian Voss)
Boulder Dash Heroes - EU Servers

LICENSE:
BSD 3-Clause - See LICENSE file

================================================================================
Last Updated: 2025-10-22
WoW Interface: 11.0.5 (The War Within)
================================================================================
